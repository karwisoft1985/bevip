<html>
<head>
   <title>Bevip</title>
   <!-- style pour le navigation scrollable  -->
    <link rel="stylesheet" href="assets/css/scrollmenu.css">

    
       
		<link rel="stylesheet" type="text/css" href="assets/css/index.css">
		<link rel="stylesheet" type="text/css" href="assets/css/font.css">
		<link rel="stylesheet" type="text/css" href="assets/css/font-awesome.css">
		<link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css">
		<link type="text/css" rel="stylesheet" href="assets/css/demo.css" />
		<link type="text/css" rel="stylesheet" href="assets/css/jquery.mmenu.all.css" />
		<link rel="stylesheet" type="text/css" href="main.css" media="all" />
	   <link rel="stylesheet" type="text/css" href="assets/css/font-awesome.css">

		<script src="cordova.js"></script>
		<script type="text/javascript" src="assets/js/jquery.min.js"></script>
		<script type="text/javascript" src="assets/js/jquery.mmenu.all.min.js"></script>
		<script src="js_web_service/login/info_connect.js"></script>
		<script src="js_web_service/login/check_cnx.js"></script>
		<script type='text/javascript' src='assets/js/jstranslate/jquery.i18n.js'></script>
      <script type='text/javascript' src='assets/js/jquery.langue.json'></script>
      <script type='text/javascript' src='assets/js/langue.json'></script>
      <script type='text/javascript' src='assets/js/jstranslate/translate.js'></script>
		<script src="js_web_service/login/notification.js"></script>	
    <!--<script type="text/javascript" charset="utf-8" src="assets/js/jquery.mobile-1.3.1.js"></script>-->

   <script>
     function voicerec() {
	 
     var maxMatches = 1;
     var promptString = "Speak now"; // optional
     var language = "en-US";         // optional
     window.plugins.speechrecognizer.startRecognize(function(result){
          var user = result; 
              	document.getElementById("text").value = result;  
				 $('.usersay').text(result);
				 var formdata = 'say='+result;
				$('#say').val('');
				$('#say').focus();
          $.get('http://karwisoft.tn/php_bevip/chatbot/conversation_start.php', formdata, function(data){
            var b = data.botsay;
            if (b.indexOf('[img]') >= 0) {
              b = showImg(b);
            }
            if (b.indexOf('[link') >= 0) {
              b = makeLink(b);
            }
            var usersay = data.usersay;
            if (user != usersay) {
              $('.usersay').text(usersay);
            }
            $('.botsay').html(b);
			document.getElementById("textbot").value = b; 
			 		  playbot();
          }, 'json').fail(function(xhr, textStatus, errorThrown){
            $('#urlwarning').html("Something went wrong! Error = " + errorThrown);
          });
                }, function(errorMessage){
                    console.log("Error message: " + errorMessage);
                }, maxMatches, promptString, language);
				
     }

   </script>
   
   <script>
   
   /* function onBodyLoad() {
        document.addEventListener("deviceready", onDeviceReady,
          false);
      }
      function onDeviceReady() {
        //Get the appInfo DOM element
        var element = document.getElementById("appInfo");
	 }*/
     function playVibrate() {
        var u = new SpeechSynthesisUtterance();
        var x = document.getElementById("frm1");
        var txt = "";
        txt = x.elements[0].value
        u.text = txt;
        u.lang = 'en-US';
        speechSynthesis.speak(u);   
        //navigator.notification.vibrate(2000);
      //  document.getElementById("frm1").reset();
      }
	  
</script>
<script>

	  function playbot() {
        var u = new SpeechSynthesisUtterance();
        var x = document.getElementById("frm2");
        var txt = "";
        txt = x.elements[0].value
        u.text = txt;
        u.lang = 'en-US';
        speechSynthesis.speak(u);   
        //navigator.notification.vibrate(2000);
      //  document.getElementById("frm1").reset();
      }
 $(window).bind('beforeunload', function(event) {   
 speechSynthesis.cancel();
 });
 document.addEventListener("resume", onResume, false);
function onResume() {
   speechSynthesis.cancel();
}
   </script>
   			 <script>
 function placeholders() {
var lang = navigator.language || navigator.language; 
if(lang=="fr-FR" || lang=="fr-CA"|| lang=="fr-BE"|| lang=="fr-CH"|| lang=="fr-LU"){
  document.querySelector("input[type=text]")
  .setAttribute("placeholder", "Partenaires, projets, et plus...");}
   else if (lang == 'ar-EG' || lang == 'ar-TN'|| lang == 'ar-SA'|| lang == 'ar-DZ'|| lang == 'ar-YE'|| lang == 'ar-JO'|| lang == 'ar-KW'|| lang == 'ar-BH'|| lang == 'ar-QA'|| lang == 'ar-AE'|| lang == 'ar-LB'|| lang == 'ar-SY'|| lang == 'ar-MA'|| lang == 'ar-OM'|| lang == 'ar-IQ'|| lang == 'ar-LY'){
	 document.querySelector("input[type=text]")
  .setAttribute("placeholder", "...شركاء، مشاريع، و المزيد");
}
					 else {
				 document.querySelector("input[type=text]")
  .setAttribute("placeholder", "Partners, projects, and more..");
        }
  
}

$(document).ready(placeholders);

	 </script> 	
		<script type="text/javascript">
		
			$(function() {
				$('nav#menu').mmenu({
					extensions	: [ 'effect-slide-menu', 'shadow-page', 'shadow-panels' ],
					counters	: true,
					navbar 		: {
						title		: '<img src="assets/img/logo.png" id="logo" style="width:70px;margin-right:5px;"/> '
					},
					navbars		: [
						{
							position	: 'top',
							content		: [
								'prev',
								'title',
								'close'
							]
						}
					]
				});
			});
			
			
		</script>
    <style type="text/css">
    
      .leftside {
        display:block;
		text-align:center;
      }
      .rightside {
        display:block;
		text-align:center;
      }
      .centerthis {
        width: 90%;
      }
      #chatdiv {
        margin-top: 20px;
        text-align: center;
        width: 100%;
      }
     
    </style>
	<script src='https://code.responsivevoice.org/responsivevoice.js'></script>
	   
	    <!-- fin appel fichier sqlite pour la création de la base de données local  -->
	 <script>
 function placeholders() {
var lang = navigator.language || navigator.language; 
if(lang=="fr-FR" || lang=="fr-CA"|| lang=="fr-BE"|| lang=="fr-CH"|| lang=="fr-LU"){
  document.querySelector("input[type=text]")
  .setAttribute("placeholder", "Partenaires, projets, et plus...");}
   else if (lang == 'ar-EG' || lang == 'ar-TN'|| lang == 'ar-SA'|| lang == 'ar-DZ'|| lang == 'ar-YE'|| lang == 'ar-JO'|| lang == 'ar-KW'|| lang == 'ar-BH'|| lang == 'ar-QA'|| lang == 'ar-AE'|| lang == 'ar-LB'|| lang == 'ar-SY'|| lang == 'ar-MA'|| lang == 'ar-OM'|| lang == 'ar-IQ'|| lang == 'ar-LY'){
	 document.querySelector("input[type=text]")
  .setAttribute("placeholder", "...شركاء، مشاريع، و المزيد");
}
					 else {
				 document.querySelector("input[type=text]")
  .setAttribute("placeholder", "Partners, projects, and more...");
        }
  
}

$(document).ready(placeholders);

	 </script> 	
	 <script>
function goBack() {
    window.history.back();
}
</script>
</head> 
<body> 


<div id="element" class="introLoading"></div>
<div class="header-bvp">
	<div class="left-header-bvp" >

		
		
		<span onclick="goBack()" style="margin-right:20px;"><i class="fa fa-arrow-left" aria-hidden="true" style="color:#fff; font-size:20px" ></i></span>
<span style="display:none">
 <input type="text" class="mm-search" name="partenaire" id="partenaire" onchange="rechercher();"  style=" background-color: #0099cc; color: #fff; border: none; width:78%"  />
<i class="fa fa-search" style="color:#fff; font-size:18px" onclick="rechercher();"></i>
</span>						
	</div>			
	</div>
				<!-- debut bloc menu de navigation -->	
		
  
        <div class="nav-bar-bvp" >			     
				 
				 <a href="actualite.html">
				 <li >
				     <i class="fa fa-home" aria-hidden="true" style="color:#ff5722;font-size:30px;"></i><br>
					 <span id='actualite'></span>
					 
				 </li>
				 </a>
				 
				 
				  <a href="store.html">
				  
				  <li>
				     
					 
					  <i class="fa fa-shopping-bag" aria-hidden="true"  style="color:#ff5722;font-size:30px;"></i><br>
					<span id='project'></span>
					 
				 
				  </li>
				  
				  </a> 
				  
				 <a href="tasks.html">
				 
				 <li>
				     
					 
					 <i class="fa fa-tasks" aria-hidden="true" style="color:#ff5722;font-size:30px;"></i><br>
					 <span id='tasks'></span>
					 
				 
				 </li>
				 
				 </a>
				 
				 <a href="statistics.html">
				 
				 <li>
				     
					 
					 <i class="fa fa-signal"  aria-hidden="true" style="color:#ff5722;font-size:30px;"></i><br>
					 <span id='statistics'></span>
					 
				 
				 </li>
				 
				 </a>
				  
				<a href="support.html">
					<li>
				    <i class="fa fa-comments" aria-hidden="true" style="color:#ff5722;font-size:30px;"></i><br>
					<span id='partner'></span>					 				 
					</li>
					</a>
        </div>
<div id="msg-err-cnx">		
<!-- fin bloc menu de navigation -->	
<center><h5 id="msg"></h5></center>


<h1 style="text-align:center;"><span id='talk'></span></h1>
<form id="frm1">
<input id="text" hidden ="hidden">
 </form> 
 <form id="frm2">
<input id="textbot" hidden="hidden" >
 </form> 
       
	<!--	<button >Voice</button> -->
		<!--<button onclick="playVibrate();" >Make me talk!</button>-->
		
		
<div class="centerthis">
      <div class="rightside">
      <div class="manspeech">
        <div  class="triangle-border bottom blue">
          <div class="botsay">hey!</div>
        </div>
      </div>
	  
	  <img src="bot.png" style="width:200px;" />
      
      </div>
      <div class="leftside">
      <div class="dogspeech">
        <div  class="triangle-border-right bottom orange">
          <div class="usersay">&nbsp;</div>
        </div>
      </div><br />
	  <span id="imageprofil">
	  </span>
      </div>
</div>


    <div class="clearthis"></div>
    <div class="centerthis">
      <form method="post" name="talkform" id="talkform" action="index.html">
	  
          <div id="chatdiv">
		
          <input type="text" name="say" id="say" class="form-control" placeholder="TALK HERE" style="display:inline-block;padding:10px;height:50px;width:75%;" /><input type="submit" name="submit" class="btn btn-success" id="submit"  style="display:inline-block;width:20%;padding:10px;height:50px;margin-left:10px;"  value="SAY" /><br>
		  
		  <button  class="bottom-partage" style="border:none;" > <i class="fa fa-microphone" onclick="javascript:voicerec();" style="font-size:20px" >  <span id="talk_mic"></span></i></button>
      
		  
	   </form>
	   
	   
  </div>
  
  </div>
  
  
  </div>
		  
    <script type="text/javascript" src="jquery-1.9.1.min.js"></script>
	
    <script type="text/javascript">
	  $(document).ready(function(){
var userLang = navigator.language || navigator.userLanguage; 
 var contenuHtml1='';
 var contenuHtml2='';
 var contenuHtml3='';
 var contenuHtml4='';
 var contenuHtml5='';
 var contenuHtml6='';
 var contenuHtml7='';
			if(userLang=="fr-FR" || userLang=="fr-CA"|| userLang=="fr-BE"|| userLang=="fr-CH"|| userLang=="fr-LU"){
				         contenuHtml1 += 'Tâches';
				         contenuHtml2 += 'Projets';
				         contenuHtml3 += 'Statistiques';
				         contenuHtml4 += 'Parler';
				         contenuHtml5 += 'A la une';
				         contenuHtml6 += 'Partenaires';
				         contenuHtml7 += '&ldquo;Appelle une bonne habitude pour en chasser une mauvaise, mais appelle-la deux fois&rdquo;';
					}
					 else if (userLang == 'ar-EG' || userLang == 'ar-TN'|| userLang == 'ar-SA'|| userLang == 'ar-DZ'|| userLang == 'ar-YE'|| userLang == 'ar-JO'|| userLang == 'ar-KW'|| userLang == 'ar-BH'|| userLang == 'ar-QA'|| userLang == 'ar-AE'|| userLang == 'ar-LB'|| userLang == 'ar-SY'|| userLang == 'ar-MA'|| userLang == 'ar-OM'|| userLang == 'ar-IQ'|| userLang == 'ar-LY'){
				    contenuHtml1 += 'مهام';	
				    contenuHtml2 += 'مشاريع';	
				    contenuHtml3 += 'إحصائيات';	
				    contenuHtml4 += 'تحدث';	
				    contenuHtml5 += 'أخبار';	
				    contenuHtml6 += 'شركاء';	
				    contenuHtml7 += '&rdquo;العادات الجيدة هي مفتاح النجاح. العادات السيئة هي بوابة الفشل&ldquo;';	
					}
					 else {
				    contenuHtml1 += 'Tasks';
				    contenuHtml2 += 'Projects';
				    contenuHtml3 += 'Statistics';
				    contenuHtml4 += 'Talk';
				    contenuHtml5 += 'News';
				    contenuHtml6 += 'Partners';
				    contenuHtml7 += '&ldquo;Good habits are the key to all success. Bad habits are the unlocked door to failure&rdquo;';
					}
 document.getElementById("tasks").innerHTML = contenuHtml1;
 document.getElementById("project").innerHTML = contenuHtml2;
 document.getElementById("statistics").innerHTML = contenuHtml3;
 document.getElementById("talk_mic").innerHTML = contenuHtml4;
 document.getElementById("actualite").innerHTML = contenuHtml5;
 document.getElementById("partner").innerHTML = contenuHtml6;
 document.getElementById("msg").innerHTML = contenuHtml7;
	  });

$(document).ready(function(){
var db = openDatabase("bevip", "1.0", "bevip", 200000);  // Open SQLite Database
var dataset;
var DataType;
db.transaction(function(tx) {tx.executeSql("select * from utilisateur where id_utilisateur='1'", [] ,
								function(tx, result) {
                                dataset = result.rows;

                                var contenuHtml1 = '';					

									for ( var i = 0, item = null; i < dataset.length; i++) {
									
										item = dataset.item(i);
										
										var image = item['image'];
																				
							         contenuHtml1 += ' <img src="'+image+'" style="width:200px;height:200px;border-radius:100%;" />';									 
                                   	
									}
									
									document.getElementById("imageprofil").innerHTML = contenuHtml1;
									
									});

									});					
		
	});
	 </script> 
	  <script type="text/javascript">
	
	  $(document).ready(function(){
      // put all your jQuery goodness in here.
        $('#talkform').submit(function(e) {
          e.preventDefault();
          var user = $('#say').val(); 
          $('.usersay').text(user);
		  document.getElementById("text").value = user; 
          var formdata = $("#talkform").serialize();
          $('#say').val('');
          $('#say').focus();
          $.get('http://karwisoft.tn/php_bevip/chatbot/conversation_start.php', formdata, function(data){
            var b = data.botsay;
            if (b.indexOf('[img]') >= 0) {
              b = showImg(b);
            }
            if (b.indexOf('[link') >= 0) {
              b = makeLink(b);
            }
            var usersay = data.usersay;
            if (user != usersay) {
              $('.usersay').text(usersay);
            }
            $('.botsay').html(b);
			 document.getElementById("textbot").value = b; 
			 		  playbot();

          }, 'json').fail(function(xhr, textStatus, errorThrown){
            $('#urlwarning').html("Something went wrong! Error = " + errorThrown);
          });
          return false;
        });
      });
	  
      function showImg(input) {
        var regEx = /\[img\](.*?)\[\/img\]/;
        var repl = '<br><a href="$1" target="_blank"><img src="$1" alt="$1" width="150" /></a>';
        var out = input.replace(regEx, repl);
        console.log('out = ' + out);
        return out
      }
	  
      function makeLink(input) {
        var regEx = /\[link=(.*?)\](.*?)\[\/link\]/;
        var repl = '<a href="$1" target="_blank">$2</a>';
        var out = input.replace(regEx, repl);
        console.log('out = ' + out);
        return out;
      }
	  
    </script>
</body> 
<html>